webpackJsonp([2],{257:function(e,t,a){function l(e){a(353)}var i=a(7)(a(301),a(388),l,"data-v-ae594dae",null);e.exports=i.exports},292:function(e,t,a){"use strict";function l(e){return/^1[3|4|5|8][0-9]\d{4,8}$/.test(e)}t.a=l},296:function(e,t,a){e.exports={default:a(297),__esModule:!0}},297:function(e,t,a){var l=a(6),i=l.JSON||(l.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},301:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(296),i=a.n(l),n=a(109),s=a.n(n),r=a(335);a(292);t.default={data:function(){return{proData:null,enable:"1",dateRange:null,temp:{activityDesc:null,activityName:null,code:null,enable:"1",endTime:null,isPush:"0",needPhone:"1",needSms:"1",participationFrequency:null,personDailyNumber:null,personDailyTargetNumber:null,personTotalNumber:null,startTime:null,targetCount:null,targetPeriod:null,targetRate:null},tableData:null,total:null,dialogFormVisible:!1,dialogStatus:"",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],code:[{required:!0,message:"请输入标识",trigger:"blur"}]},listQuery:{pageNumber:1,pageSize:20},textMap:{update:"编辑",create:"新增"}}},created:function(){this.getTableData()},methods:{handleActive:function(e){var t=this,l=e.id,i=0==e.enable?"开启":"关闭";this.$confirm("是否"+i+"活动?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(r.a)(l).then(function(e){0===e.code&&(t.$message({type:"success",message:"删除成功!"}),t.getTableData())})})},dateRangeChange:function(){this.temp.startTime=new Date(this.dateRange[0]).getTime(),this.temp.endTime=new Date(this.dateRange[1]).getTime()},getTableData:function(){var e=this;a.i(r.b)("/community/activity/page",this.listQuery).then(function(t){if(0===t.code){var a=t.data;e.total=a.total,e.tableData=a.data}})},handleCreate:function(){this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){this.dateRange=[],this.dateRange.push(new Date(e.startTime)),this.dateRange.push(new Date(e.endTime)),["isPush","needPhone","needSms","enable"].forEach(function(t){e[t]=e[t].toString()}),this.temp=e,this.dialogStatus="update",this.dialogFormVisible=!0},resetTemp:function(){this.proData=null,this.temp={activityDesc:null,activityName:null,code:null,enable:"1",endTime:null,isPush:"0",needPhone:"1",needSms:"1",participationFrequency:null,personDailyNumber:null,personDailyTargetNumber:null,personTotalNumber:null,startTime:null,targetCount:null,targetPeriod:null,targetRate:null}},getProData:function(e){this.proData=e},create:function(){var e=this;if(!this.temp.startTime||!this.temp.endTime)return void this.$message.error("请选择时间范围");this.$refs.hongbao.getData();var t=s()(this.temp,this.proData);console.log("data",t),console.log(i()(t)),a.i(r.c)(t).then(function(t){0===t.code&&(e.getTableData(),e.dialogFormVisible=!1,e.$message.success("创建成功"))})},update:function(){var e=this;if(!this.temp.startTime||!this.temp.endTime)return void this.$message.error("请选择时间范围");a.i(r.d)(this.temp).then(function(t){0===t.code&&(e.$message.success("保存成功"),e.getTableData(),e.dialogFormVisible=!1)})}},components:{}}},335:function(e,t,a){"use strict";function l(e,t){return a.i(r.a)({url:e,method:"get",params:t})}function i(e){return a.i(r.a)({url:"/community/activity",method:"POST",data:e})}function n(e){return a.i(r.a)({url:"/community/activity",method:"put",data:e})}function s(e){return a.i(r.a)({url:"/community/activity/"+e+"/status",method:"put"})}t.b=l,t.c=i,t.d=n,t.a=s;var r=a(108)},343:function(e,t,a){t=e.exports=a(254)(!1),t.push([e.i,".w50[data-v-ae594dae]{display:inline-block;width:50%}",""])},353:function(e,t,a){var l=a(343);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(255)("05162412",l,!0)},388:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:e.handleCreate}},[e._v("新增\n    ")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"活动ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"活动名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.activityName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"活动预览"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.activityDesc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDateTime")(t.row.startTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDateTime")(t.row.endTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn btn-sm btn-info",attrs:{size:"small",type:"info"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.handleActive(t.row)}}},[e._v(e._s(0==t.row.enable?"开启":"关闭")+"\n        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.pageNumber,"page-size":e.listQuery.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.getTableData,"update:currentPage":function(t){e.listQuery.pageNumber=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,size:"full"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"活动设置"}},[a("el-form-item",{attrs:{label:"活动名称","label-width":"80px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{placeholder:"请输入活动名称"},model:{value:e.temp.activityName,callback:function(t){e.temp.activityName=t},expression:"temp.activityName"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"关键字","label-width":"80px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:e.temp.code,callback:function(t){e.temp.code=t},expression:"temp.code"}}),e._v(" "),a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.temp.isPush,callback:function(t){e.temp.isPush=t},expression:"temp.isPush"}},[e._v("回复关键字推送活动")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"活动时间","label-width":"80px"}},[a("div",{staticClass:"w50"},[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:e.dateRangeChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"手机号","label-width":"80px"}},[a("div",{staticClass:"w50"},[a("div",{staticClass:"checkitem"},[a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.temp.needPhone,callback:function(t){e.temp.needPhone=t},expression:"temp.needPhone"}},[e._v("需要")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:e.temp.needPhone,callback:function(t){e.temp.needPhone=t},expression:"temp.needPhone"}},[e._v("不需要")])],1)])]),e._v(" "),a("el-form-item",{attrs:{label:"短信验证","label-width":"80px"}},[a("div",{staticClass:"w50"},[a("div",{staticClass:"checkitem"},[a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.temp.needSms,callback:function(t){e.temp.needSms=t},expression:"temp.needSms"}},[e._v("需要")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:e.temp.needSms,callback:function(t){e.temp.needSms=t},expression:"temp.needSms"}},[e._v("不需要")])],1)])]),e._v(" "),a("el-form-item",{attrs:{label:"活动规则","label-width":"80px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入活动规则"},model:{value:e.temp.activityDesc,callback:function(t){e.temp.activityDesc=t},expression:"temp.activityDesc"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"活动状态","label-width":"80px"}},[a("div",{staticClass:"w50"},[a("div",{staticClass:"checkitem"},[a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.temp.enable,callback:function(t){e.temp.enable=t},expression:"temp.enable"}},[e._v("开启")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:e.temp.enable,callback:function(t){e.temp.enable=t},expression:"temp.enable"}},[e._v("关闭")])],1)])])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参与设置"}},[a("el-form-item",{attrs:{label:"每人总次数","label-width":"150px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{placeholder:"请输入活动规则"},model:{value:e.temp.personTotalNumber,callback:function(t){e.temp.personTotalNumber=t},expression:"temp.personTotalNumber"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"每人每天次数","label-width":"150px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{placeholder:"请输入活动规则"},model:{value:e.temp.personDailyNumber,callback:function(t){e.temp.personDailyNumber=t},expression:"temp.personDailyNumber"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"每人每天中奖次数","label-width":"150px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{placeholder:"请输入活动规则"},model:{value:e.temp.personDailyTargetNumber,callback:function(t){e.temp.personDailyTargetNumber=t},expression:"temp.personDailyTargetNumber"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"中奖时间间隔","label-width":"150px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{placeholder:"请输入活动规则"},model:{value:e.temp.targetPeriod,callback:function(t){e.temp.targetPeriod=t},expression:"temp.targetPeriod"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"参与频率","label-width":"150px"}},[a("div",{staticClass:"w50"},[a("el-input",{attrs:{placeholder:"请输入活动规则"},model:{value:e.temp.participationFrequency,callback:function(t){e.temp.participationFrequency=t},expression:"temp.participationFrequency"}})],1)])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("提交")]):a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]}}});