webpackJsonp([20],{269:function(e,t,a){var n=a(7)(a(313),a(394),null,null,null);e.exports=n.exports},292:function(e,t,a){"use strict";function n(e){return/^1[3|4|5|8][0-9]\d{4,8}$/.test(e)}t.a=n},293:function(e,t,a){"use strict";function n(e,t){return a.i(p.a)({url:e,method:"get",params:t})}function i(e){return a.i(p.a)({url:"/community/banner_type",method:"POST",data:e})}function l(e){return a.i(p.a)({url:"/community/banner_type/status/"+e,method:"put"})}function r(e){return a.i(p.a)({url:"/community/banner_type",method:"put",data:e})}function s(e){return a.i(p.a)({url:"/community/banner",method:"POST",data:e})}function o(e){return a.i(p.a)({url:"/community/banner",method:"put",data:e})}function u(e){return a.i(p.a)({url:"/community/banner/"+e,method:"delete"})}function c(e){return a.i(p.a)({url:"/community/goods",method:"POST",data:e})}function d(e){return a.i(p.a)({url:"/community/goods",method:"put",data:e})}function m(e){return a.i(p.a)({url:"/community/goods/"+e+"/status",method:"put"})}t.a=n,t.b=i,t.j=l,t.c=r,t.h=s,t.i=o,t.g=u,t.e=c,t.f=d,t.d=m;var p=a(108)},313:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(293);a(292);t.default={data:function(){return{enable:"1",dateRange:null,temp:{enable:"1",name:null,id:null},tableData:null,total:null,dialogFormVisible:!1,dialogStatus:"",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],code:[{required:!0,message:"请输入标识",trigger:"blur"}]},listQuery:{pageNumber:1,pageSize:20},textMap:{update:"编辑",create:"新增"}}},created:function(){this.getTableData()},methods:{handleBan:function(e){var t=this;a.i(n.j)(e).then(function(e){0===e.code&&(t.$message.success("操作成功"),t.getTableData())})},goList:function(e){this.$router.push({path:"/community/fnlist",query:{id:e}})},dateRangeChange:function(){this.temp.startTime=new Date(this.dateRange[0]).getTime(),this.temp.endTime=new Date(this.dateRange[1]).getTime()},getTableData:function(){var e=this;a.i(n.a)("/community/banner_type/page",this.listQuery).then(function(t){if(0===t.code){var a=t.data;e.total=a.total,e.tableData=a.data}})},handleCreate:function(){this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){this.dateRange=[],this.dateRange.push(new Date(e.startTime)),this.dateRange.push(new Date(e.endTime)),this.enable=e.enable.toString(),this.temp=e,this.dialogStatus="update",this.dialogFormVisible=!0},resetTemp:function(){this.enable="1",this.temp={name:null,enable:"1",id:null}},create:function(){var e=this;if(this.resetTemp(),this.temp.id=0,this.temp.enable=this.enable,!this.temp.startTime||!this.temp.endTime)return void this.$message.error("请选择时间范围");this.$refs.temp.validate(function(t){t&&a.i(n.b)(e.temp).then(function(t){0===t.code&&(e.getTableData(),e.dialogFormVisible=!1,e.$message.success("创建成功"))})})},update:function(){var e=this;if(this.temp.enable=this.enable,!this.temp.startTime||!this.temp.endTime)return void this.$message.error("请选择时间范围");a.i(n.c)(this.temp).then(function(t){0===t.code&&(e.getTableData(),e.dialogFormVisible=!1,e.$message.success("保存成功"))})}}}},394:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:e.handleCreate}},[e._v("新增\n    ")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.bannerCount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDateTime")(t.row.startTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDateTime")(t.row.endTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"标示码",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0===t.row.enable?"禁用":"启用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn btn-sm btn-info",attrs:{size:"small",type:"info"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.goList(t.row.id)}}},[e._v("列表\n        ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.handleBan(t.row.id)}}},[e._v(e._s(0==t.row.enable?"启用":"禁用"))])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.pageNumber,"page-size":e.listQuery.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.getTableData,"update:currentPage":function(t){e.listQuery.pageNumber=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,size:"full"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"temp",attrs:{model:e.temp,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{model:{value:e.temp.name,callback:function(t){e.temp.name=t},expression:"temp.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标识",prop:"code"}},[a("el-input",{model:{value:e.temp.code,callback:function(t){e.temp.code=t},expression:"temp.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上线时间"}},[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:e.dateRangeChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("div",{staticClass:"checkitem"},[a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.enable,callback:function(t){e.enable=t},expression:"enable"}},[e._v("启用")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:e.enable,callback:function(t){e.enable=t},expression:"enable"}},[e._v("禁用")])],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("提交")]):a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}}});